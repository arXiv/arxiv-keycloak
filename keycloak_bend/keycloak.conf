quarkus.transaction-manager.enable-recovery=true

#
# Database
# The database vendor.
# db=postgres

# The username of the database user.
#db-username=keycloak

# The password of the database user.
#db-password=password

# The full database JDBC URL. If not provided, a default URL is set based on the selected database vendor.
#db-url=jdbc:postgresql://127.0.0.1:5432/keycloak

#spi-connections-jpa-sslmode=require
#spi-connections-jpa-sslrootcert=/home/keycloak/certs/server-ca.pem
#spi-connections-jpa-sslcert=/home/keycloak/certs/client-cert.pem
#spi-connections-jpa-sslkey=/home/keycloak/certs/client-key.pem

# Observability

# If the server should expose healthcheck endpoints.
health-enabled=true

# If the server should expose metrics endpoints.
metrics-enabled=true

# HTTP

# The file path to a server certificate or certificate chain in PEM format.
#https-certificate-file=${kc.home.dir}conf/server.crt.pem

# The file path to a private key in PEM format.
#https-certificate-key-file=${kc.home.dir}conf/server.key.pem

# The proxy address forwarding mode if the server is behind a reverse proxy.
# proxy=reencrypt

# Do not attach route to cookies and rely on the session affinity capabilities from reverse proxy
#spi-sticky-session-encoder-infinispan-should-attach-route=false

# Hostname for the Keycloak server.
# hostname=keycloak.example.com

proxy-address-forwarding=true

# HTTP limits for large cookies (8KB+) - increased from 128K to 2MB
quarkus.http.limits.max-header-size=2MB
quarkus.http.limits.max-chunk-size=128KB
quarkus.http.limits.max-initial-line-length=64KB

# Enable HTTP access logging to see 431 errors
quarkus.http.access-log.enabled=true
quarkus.http.access-log.pattern="%h %l %u %t \"%r\" %s %b \"%{Referer}i\" \"%{User-Agent}i\" %D"

# Enable Vert.x HTTP server logging (Keycloak uses Vert.x, not Undertow)
quarkus.log.category.io.vertx.core.http.level=TRACE
quarkus.log.category.io.quarkus.vertx.http.level=TRACE
quarkus.log.category.io.vertx.level=DEBUG
quarkus.log.category.io.netty.level=DEBUG

# Debug: Show configuration values at startup
quarkus.log.category.io.quarkus.http.level=DEBUG
